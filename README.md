Fibonacci

Структура проекта

    Таргеты
        Приложения - .NET Framework 4.8
        Библиотеки - .NET Standard 2.0

    Приложения
        Master - консольное приложение
                 принимает целочисленный аргумент как аргумент командной строки
                 общается со Slave через WebApi
        Slave - ASP.NET WebApi приложение
                общается с Master через RabbitMQ

    Библиотеки
        TransportApi - абстракция для транспорта c реализациями в виде RabbitBus и RestBus
        EventBusApi - абстракция очереди доменных событий с базовой реализацией EventBusImpl
        FibbonacciDomain - доменная часть приложения, реализованная на абстракциях других модулей
                           сожержит доменные события и их обработчики

    Корень композиции
        Master - Program.Main - точка входа и корень композиции без применения DI контейнера (Pure DI)
        Slave - HttpControllerActivatorDecorator - для возможности инъекции зависимостей в наследников ApiController
                PureDIDependencyResolverDecorator - локатор зависимостей, без применения DI контейнера (Pure DI)
                Global.asax - точка входа

    Настройки приложения
        В корне композиции каждого приложения есть метод для тонкой настройки (GetExternalConfiguration)
            asyncCalculationsCount - входной аргумент командной строки для Master, число асинхронных рассчетов последовательности Фибоначчи
            rabbitConnectionConfig - connection string к RabbitMQ
            storageDefault - стартовое число для расчета (0 для Master, 1 для Slave)
            slaveApiBaseUri - Slave REST api URL (порт для разработки 53855)
            restSecondsTimeout - таймаут отправки сообщения по транспорту RestBus
            restMillisecondsPollingDelay - временной интервал опроса Slave REST api на GetAlive
            queuePrefix - префикс для очереди ответа RabbitMQ
            concurrencyLevel - максимальное кол-во одновременно выполняемых конкурентных задач (throttling)
            retryLimit - кол-во повторов при неудачной попытке обработать доменное событие

    Возможности поменять поведение поддерживается только в корне композиции и требует перекомпиляции, т.к. не используется DI контейнер и нет возможности использовать прерывания (Interception). Готовые реализации для изменения поведения:
        IEventBus
            HybridEventBus и DummyEventBusWithPriority (по умолчанию) - наивная реализация очереди событий с приоритетом (без использования двоичной кучи)
                                                                        позволяет обрабатывать приоритетные сообщения первыми
            EventBus - общая очередь событий без учета приоритета
                       позволяет обрабатывать события в порядке их добавления в очередь
        IFibonacciCalculator
            FibonacciSafeCalculator - расчет без учета переполнения
                                      расчет будет выполняться бесконечно
                                      с учетом приоритета некоторые сообщения могут быть не обработаны вовсе
            FibonacciUnsafeCalculator (по умолчанию) - расчет с ошибкой при переполнении
                                                       расчет остановится после завершения всех попыток пересчитать переполнение и положит события в коллекцию ошибок
                                                       обработаются все сообщения
                                                       приложения будут ожидать новых сообщений
                                                       новый расчет можно будет запустить передав POST запрос в Slave
        IPipelineStep<TDomainEvent>
            декораторы логирования шагов в консоль для наглядности происходящего
